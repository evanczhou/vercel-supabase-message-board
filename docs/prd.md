# Product Requirements Document (PRD)

## Project Title

**Supabase Message Board**

## 1Â â€”Â ExecutiveÂ Summary

A minimal realâ€‘time message board web application built with **Next.js**, **Supabase**, and deployed on **Vercel**.  The goal is to demonstrate the core Supabase stack (database, auth, and realtime) in the simplest possible app so new engineers can spin up, deploy, and iterate quickly.

## 2Â â€”Â Goals & Nonâ€‘Goals

| Â Â  | Goals                                              | Nonâ€‘Goals                                        |
| -- | -------------------------------------------------- | ------------------------------------------------ |
| ðŸŸ¢ | Onboard engineers to Supabase & Vercel in <Â 30Â min | Provide a fullyâ€‘featured forum or social network |
| ðŸŸ¢ | Showcase basic CRUD + realtime subscriptions       | Advanced moderation tools (edit/delete)          |
| ðŸŸ¢ | 100Â % public openâ€‘source example                   | Robust auth flows (OAuth)                        |
| ðŸŸ¢ | Zeroâ€‘config CI/CD via Vercel                       | Native mobile apps                               |

## 3Â â€”Â Personas

* **New Dev** â€“ Wants a working example to learn Supabase quickly.
* **Hobbyist** â€“ Wants to deploy a toy app to share with friends.
* **TechÂ Lead** â€“ Evaluating Supabase as a backend option.

## 4Â â€”Â SuccessÂ Metrics

* **Timeâ€‘toâ€‘Helloâ€‘WorldÂ <Â 30Â min** from `git clone` to live URL.
* **<Â 200Â ms** P95 read latency from Vercel edge to Supabase.
* **Realtime lag <Â 3Â s** for message broadcast to all clients.
* **100Â %Â test pass** in automated CI.

## 5Â â€”Â UserÂ Stories

1. *As a visitor*, I can type my **name** and **message**, press **Send**, and immediately see my message in the list.
2. *As a visitor on another device*, I see the new message appear in real time.
3. *As a developer*, I can run `npm run dev` and see the app locally.
4. *As a reviewer*, I can open the PR preview on Vercel.

## 6Â â€”Â FunctionalÂ Requirements

| Â FRÂ  | Description                                                  |
| ---- | ------------------------------------------------------------ |
| FRâ€‘1 | Frontend form with inputs: `name`, `content`, `Send` button  |
| FRâ€‘2 | Create record in `messages` table via Supabase JS client     |
| FRâ€‘3 | List messages ordered by `created_at` desc                   |
| FRâ€‘4 | Subscribe to `INSERT` events for realtime updates            |
| FRâ€‘5 | Simple clientâ€‘side validation (nonâ€‘empty fields â‰¤Â 280Â chars) |

## 7Â â€”Â Nonâ€‘FunctionalÂ Requirements

* **Performance**: P95 initial page load â‰¤Â 1.5Â s on 3G network.
* **Security**: RLSÂ enabled; only `insert` & `select` allowed.
* **Scalability**: Up to 500 concurrent websocket connections on free tier.
* **Accessibility**: WCAGÂ 2.1 AA color contrast & semantic HTML.
* **i18n**: Strings externalised for future localization.

## 8Â â€”Â SystemÂ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   HTTPS   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  PostgREST  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
| Browser|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶| Vercel Edge/Next.js |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶| Supabase  |
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             |  DB + RT  |
        â–²  Realtime        â–²    env vars                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

*Vercel preview deployments per branch; Supabase project in `org-dev`.*

## 9Â â€”Â DataÂ Model

```sql
CREATE TABLE messages (
  id         BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name       TEXT    NOT NULL,
  content    TEXT    NOT NULL CHECK (char_length(content) <= 280),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);

ALTER TABLE messages ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Public read"  ON messages FOR SELECT USING (true);
CREATE POLICY "Public write" ON messages FOR INSERT WITH CHECK (true);
```

## 10Â â€”Â API Endpoints (via Supabase Client)

| Action         | Method                                   | Path               | Notes         |
| -------------- | ---------------------------------------- | ------------------ | ------------- |
| List messages  | `select()`                               | `from('messages')` | Ordered desc  |
| Insert message | `insert([{â€¦}])`                          | `from('messages')` | Anon key only |
| Realtime sub   | `supabase.from('messages').on('INSERT')` | WebSocket          | None          |

## 11Â â€”Â Security & Privacy

* No PII beyond selfâ€‘entered `name` & `content`.
* Anon public key only; service role key NEVER shipped to client.
* Harden SupabaseÂ â†’ **passwordÂ rotated quarterly**.

## 12Â â€”Â UX/UI Guidelines

* TailwindÂ CSS for rapid styling.
* Mobileâ€‘first responsive layout.
* Toast confirmation on successful send.
* Optimistic UI: append message locally before network roundâ€‘trip.

## 13Â â€”Â Localization

* Extract UI strings to `/src/locales/en.json`.
* Default language: English; placeholders for `ja`, `es`.

## 14Â â€”Â Analytics & Logging

* Log page views via Vercel WebÂ Analytics (free tier).
* Console warnings surfaced to Sentry in future enhancement.

## 15Â â€”Â Compliance

* GPLâ€‘3.0 license by default; ok to change before OSS release.

## 16Â â€”Â Milestones & Timeline

| Â Week  | Deliverable                           |
| ------ | ------------------------------------- |
| Â 0Â Â Â Â  | Kickâ€‘off, Repo scaffold               |
| Â 1Â Â Â Â  | Supabase schema + RLS live            |
| Â 1Â Â Â Â  | Next.js pages + components            |
| Â 2Â Â Â Â  | Realtime subscription + optimistic UI |
| Â 2Â Â Â Â  | CIÂ +Â Vercel preview, README draft     |
| Â 3Â Â Â Â  | Accessibility & i18n pass             |
| Â 3Â Â Â Â  | Docs polish, public launch            |

## 17Â â€”Â Risks & Mitigations

| Risk                              | Likelihood | Impact | Mitigation                            |
| --------------------------------- | ---------- | ------ | ------------------------------------- |
| Supabase free tier limits reached | Low        | Med    | Upgrade to "Pro" or rateâ€‘limit writes |
| Abuse / spam messages             | Med        | Low    | Add captcha or require auth in v1.1   |

## 18Â â€”Â Future Enhancements

* Supabase Auth w/ GitHub OAuth.
* Edit & Delete (softâ€‘delete) actions.
* Emoji reactions.
* Pagination / infinite scroll.

---

# ðŸ“„Â AdditionalÂ Docs

## README.md (skeleton)

````markdown
# Supabase Message Board

A deadâ€‘simple realtime message board built with Next.jsÂ 14, Supabase, and deployed on Vercel.

##Â GettingÂ Started
```bash
cp .env.example .env.local
npm install
npm run dev
````

Open [http://localhost:3000](http://localhost:3000).

````

## .cursorrules (starter)
```json
{
  "style": "prettier",
  "languages": ["javascript", "typescript", "sql"],
  "testCommand": "npm test",
  "yoloMode": true
}
````

---

*DocumentÂ versionÂ 1.0 â€“Â MayÂ 25,Â 2025*
